!function(e){let o=document.getElementById("new-quote-button"),t="";e(o).on("click",function(o){o.preventDefault(),t=document.URL,e.ajax({method:"GET",url:qod_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(o){const t=o[0];history.pushState(null,null,qod_vars.home_url+"/"+t.slug);let n=o[0]._qod_quote_source,u=o[0]._qod_quote_source_url,r=o[0].content.rendered,l=o[0].title.rendered;e(".entry-content").html(r),e(".entry-title").html(`&mdash; ${l}`),n&&u?e(".source").html(`, <a href=' ${u} ' > ${n} </a> `):n&&!u?e(".source").html(",  "+n):e(".source").html("")}).fail(function(e){console.log("an error occured",e)}),e(window).on("popstate",function(){window.location.replace(t)})}),e("#submit-quote-btn").on("click",function(o){o.preventDefault(),console.log("click!"),e.ajax({method:"POST",url:qod_vars.rest_url+"wp/v2/posts/",data:{title:e("#quote-author").val(),content:e("#quote-content").val(),_qod_quote_source:e("#quote-source").val(),_qod_quote_source_url:e("#quote-source-url").val(),status:"pending"},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",qod_vars.wpapi_nonce)}}).done(function(){e("#quote-submission-form").slideUp(function(){e(".entry-title").append("<p>Thanks, your quote submission was received!</p>")})}).fail(function(e){console.log("an error occured",e)})})}(jQuery);